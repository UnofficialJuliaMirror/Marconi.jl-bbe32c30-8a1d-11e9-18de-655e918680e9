<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>RF Analysis · Marconi.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../../"><img class="logo" src="../../assets/logo.svg" alt="Marconi.jl logo"/></a><h1>Marconi.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li class="current"><a class="toctext" href>RF Analysis</a><ul class="internal"><li><a class="toctext" href="#The-Network-Object-1">The Network Object</a></li><li><a class="toctext" href="#Stability-Analysis-1">Stability Analysis</a></li><li><a class="toctext" href="#VSWR-Circles-1">VSWR Circles</a></li><li><a class="toctext" href="#Gain-Equations-1">Gain Equations</a></li><li><a class="toctext" href="#Transmission-Line-Calculations-1">Transmission Line Calculations</a></li></ul></li><li><a class="toctext" href="../FileIO/">File IO</a></li><li><a class="toctext" href="../Plot/">Plotting</a></li><li><a class="toctext" href="../NetworkAnalysis/">Network Analysis</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../../lib/Public/">Public</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>RF Analysis</a></li></ul><a class="edit-page" href="https://github.com/kiranshila/Marconi.jl/blob/master/docs/src/man/RFAnalysis.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>RF Analysis</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="RF-Analysis-1" href="#RF-Analysis-1">RF Analysis</a></h1><ul><li><a href="#RF-Analysis-1">RF Analysis</a></li><ul><li><a href="#The-Network-Object-1">The Network Object</a></li><ul><li><a href="#DataNetwork-1">DataNetwork</a></li><li><a href="#EquationNetwork-1">EquationNetwork</a></li></ul><li><a href="#Stability-Analysis-1">Stability Analysis</a></li><ul><li><a href="#Stability-Circles-1">Stability Circles</a></li></ul><li><a href="#VSWR-Circles-1">VSWR Circles</a></li><li><a href="#Gain-Equations-1">Gain Equations</a></li><ul><li><a href="#Maximum-Unilateral-Gain-1">Maximum Unilateral Gain</a></li><li><a href="#Maximum-Stable-Gain-1">Maximum Stable Gain</a></li><li><a href="#Maximum-Available-Gain-1">Maximum Available Gain</a></li></ul><li><a href="#Transmission-Line-Calculations-1">Transmission Line Calculations</a></li></ul></ul><h2><a class="nav-anchor" id="The-Network-Object-1" href="#The-Network-Object-1">The Network Object</a></h2><p>Marconi is structured around a base <code>AbstractNetwork</code> object. This object can be constructed with data, equations, and the combination of other networks.</p><p>All networks provide attributes <code>ports</code> and <code>Z0</code> for characteristic impedance.</p><h3><a class="nav-anchor" id="DataNetwork-1" href="#DataNetwork-1">DataNetwork</a></h3><p>To build a network from a Touchstone file see <a href="../FileIO/#File-IO-1">File IO</a>, otherwise we can simply use the constructor for DataNetwork.</p><p>Besides <code>ports</code> and <code>Z0</code>, a <code>DataNetwork</code> must also have <code>frequency</code>, a vector of frequencies for which the network is characterized, and <code>s_params</code>, for the S-Parameters themselves.</p><p>As of this release, the <code>frequency</code>/<code>s_params</code> lists must be ordered. If they are not evenly-spaced, all interpolation operations will be Grid interpolations instead of splines.</p><pre><code class="language-julia"># DataNetwork(ports,Z0,frequency,s_params)
myNetwork = DataNetwork(1,50,[100e6, 200e6],[0.3+0.5im, 0.4+0.6im])</code></pre><pre><code class="language-none">1-Port Network
 Z0 = 50
 Frequency = 100.0 MHz to 200.0 MHz
 Points = 2
</code></pre><p>For more than 1 port, the S-Parameters have to be an n-square matrix for n ports.</p><pre><code class="language-julia">myNetwork = DataNetwork(2,50,[100e6, 200e6],[[0.3+0.5im 0.1+0.2im; 0.4+0.6im 0.3+0.5im], [0.3+0.5im 0.1+0.2im; 0.4+0.6im 0.3+0.5im]])</code></pre><pre><code class="language-none">2-Port Network
 Z0 = 50
 Frequency = 100.0 MHz to 200.0 MHz
 Points = 2
</code></pre><h3><a class="nav-anchor" id="EquationNetwork-1" href="#EquationNetwork-1">EquationNetwork</a></h3><p>To build a network from an equation, we start with an equation that defines some S-Parameters.</p><p>Take a series R-L network for example. The S-Parameters of an RL network would look like:</p><pre><code class="language-julia">function inductorAndResistor(;freq,Z0)
    L = 1e-9
    R = 30
    z = R + im*2*pi*freq*L
    return (z-Z0)/(z+Z0)
end</code></pre><pre><code class="language-none">inductorAndResistor (generic function with 1 method)</code></pre><p>To use an equation-driven network in Marconi, the function must accept the kwags <code>freq</code> and <code>Z0</code>.</p><p>To build the <code>EquationNetwork</code>:</p><pre><code class="language-julia">RL = EquationNetwork(1,50,inductorAndResistor)</code></pre><pre><code class="language-none">1-Port Network
 Z0 = 50
 Equation-driven Network
</code></pre><p>Once again, for n-port networks, the function must provide an n-square matrix</p><pre><code class="language-julia">function idealTransmissionLine(;freq,Z0)
    l = 1e-2 # 2cm
    λ = (3e8/freq)
    β = (2*pi)/λ
    return [0 exp(-β*l);exp(-β*l) 0]
end

tline = EquationNetwork(2,50,idealTransmissionLine)</code></pre><pre><code class="language-none">2-Port Network
 Z0 = 50
 Equation-driven Network
</code></pre><h2><a class="nav-anchor" id="Stability-Analysis-1" href="#Stability-Analysis-1">Stability Analysis</a></h2><p>One of the most important aspects in active microwave design is that of stability.</p><p>When designing an amplifier, we do not want oscillations on either of the ports. An oscillation would imply that <span>$|\Gamma_{In}| &gt; 1$</span> or <span>$|\Gamma_{Out}| &gt; 1$</span>.</p><p>As both of these gammas depend on the input and output matching networks, the stability of an amplifier depends on <span>$\Gamma_{S}$</span> and <span>$\Gamma_{L}$</span>.</p><p>There are two different kinds of stability:</p><ul><li>Unconditional Stability - <span>$|\Gamma_{In}| &lt; 1$</span> and <span>$|\Gamma_{Out}| &lt; 1$</span> for all source and load impedances</li><li>Conditional Stability - <span>$|\Gamma_{In}| &lt; 1$</span> and <span>$|\Gamma_{Out}| &lt; 1$</span> for certain impedances.</li></ul><p>To test for unconditional stability, we use the <em>Rollet Stability Criterion</em></p><div>\[K = \frac{1-|S_{11}|^2-|S_{22}|^2+|\Delta|^2}{2|S_{12}S_{21}|} &gt; 1\]</div><p>along with the auxiliary condition that</p><div>\[|\Delta| = |S_{11}S_{22}-S_{12}S_{21}| &lt; 1\]</div><p>For a device to be unconditionally stable, both of these conditions must be satisfied.</p><p>To test these conditions (or plot them), use the following functions:</p><div></div><p><em>Example 12.2 from Microwave Engineering my David M. Pozar</em></p><pre><code class="language-julia">gan_hemt = [0.869*exp(deg2rad(-159)im) 4.250*exp(deg2rad(61)im);0.031*exp(deg2rad(-9)im) 0.507*exp(deg2rad(-117)im)]

network = DataNetwork(2,50,[1.9e9],[gan_hemt])</code></pre><pre><code class="language-none">2-Port Network
 Z0 = 50
 Frequency = 1.9 GHz to 1.9 GHz
 Points = 1
</code></pre><p>We now compute <code>|Δ|</code> with</p><pre><code class="language-julia">testMagDelta(network)[1] # Only 1 point in this data</code></pre><pre><code class="language-none">0.33618219546559625</code></pre><p>and <code>K</code> with</p><pre><code class="language-julia">testK(network)[1]</code></pre><pre><code class="language-none">0.3825748331995004</code></pre><p>So, now we can conclude that this device is <em>NOT</em> unconditionally stable at 1.9 GHz as <span>$|\Delta| &lt; 1 $,but $K&lt;1$</span>.</p><p>We can also plot the stability factors as a function of frequency to find stable regions.</p><p>Take the data from this CE3520K3 low noise JFET:</p><pre><code class="language-julia">jfet = readTouchstone(&quot;CE3520K3.s2p&quot;)

# Plot our criteria
ax = plotRectangular(jfet,testK,label=&quot;K&quot;)
plotRectangular!(ax,jfet,testMagDelta,label=raw&quot;$|\Delta|$&quot;)

# Add a horizontal line to show stability regions
push!(ax,@pgf(HLine(@pgf({&quot;dashed&quot;}),1)))

# Adjust legend location
ax[&quot;legend pos&quot;] = &quot;outer north east&quot;

# And a title, why not
ax[&quot;title&quot;] = &quot;Stability Tests&quot;</code></pre><pre><code class="language-none">Axis(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(&quot;xlabel&quot;=&gt;&quot;Frequency (GHz)&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing,&quot;legend pos&quot;=&gt;&quot;outer north east&quot;,&quot;title&quot;=&gt;&quot;Stability Tests&quot;), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((2.0, 0.194406), nothing, nothing, nothing, nothing), Coordinate{2}((2.1, 0.213864), nothing, nothing, nothing, nothing), Coordinate{2}((2.2, 0.223697), nothing, nothing, nothing, nothing), Coordinate{2}((2.3, 0.231366), nothing, nothing, nothing, nothing), Coordinate{2}((2.4, 0.240266), nothing, nothing, nothing, nothing), Coordinate{2}((2.5, 0.255481), nothing, nothing, nothing, nothing), Coordinate{2}((2.6, 0.264429), nothing, nothing, nothing, nothing), Coordinate{2}((2.7, 0.278886), nothing, nothing, nothing, nothing), Coordinate{2}((2.8, 0.290167), nothing, nothing, nothing, nothing), Coordinate{2}((2.9, 0.302212), nothing, nothing, nothing, nothing)  …  Coordinate{2}((25.1, 0.886281), nothing, nothing, nothing, nothing), Coordinate{2}((25.2, 0.908324), nothing, nothing, nothing, nothing), Coordinate{2}((25.3, 0.933371), nothing, nothing, nothing, nothing), Coordinate{2}((25.4, 0.95901), nothing, nothing, nothing, nothing), Coordinate{2}((25.5, 0.991115), nothing, nothing, nothing, nothing), Coordinate{2}((25.6, 1.02486), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 1.06875), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 1.10939), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 1.14167), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 1.19572), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;K&quot;, false), Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((2.0, 0.638057), nothing, nothing, nothing, nothing), Coordinate{2}((2.1, 0.636106), nothing, nothing, nothing, nothing), Coordinate{2}((2.2, 0.634401), nothing, nothing, nothing, nothing), Coordinate{2}((2.3, 0.632483), nothing, nothing, nothing, nothing), Coordinate{2}((2.4, 0.629767), nothing, nothing, nothing, nothing), Coordinate{2}((2.5, 0.628873), nothing, nothing, nothing, nothing), Coordinate{2}((2.6, 0.626347), nothing, nothing, nothing, nothing), Coordinate{2}((2.7, 0.624016), nothing, nothing, nothing, nothing), Coordinate{2}((2.8, 0.622004), nothing, nothing, nothing, nothing), Coordinate{2}((2.9, 0.619043), nothing, nothing, nothing, nothing)  …  Coordinate{2}((25.1, 0.0399858), nothing, nothing, nothing, nothing), Coordinate{2}((25.2, 0.0414342), nothing, nothing, nothing, nothing), Coordinate{2}((25.3, 0.0445998), nothing, nothing, nothing, nothing), Coordinate{2}((25.4, 0.0463219), nothing, nothing, nothing, nothing), Coordinate{2}((25.5, 0.0509473), nothing, nothing, nothing, nothing), Coordinate{2}((25.6, 0.0550004), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 0.062593), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 0.0676316), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 0.0716296), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 0.078679), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;\$|\\Delta|\$&quot;, false), HLine(Options(OrderedCollections.OrderedDict{Any,Any}(&quot;dashed&quot;=&gt;nothing), true), 1)])</code></pre><p>From this plot, we can conclude that under 50Ω matching on both ports, this device is unconditionally stable from 14-18 GHz and above 25 GHz as those two regions satisfy the criterion.</p><h3><a class="nav-anchor" id="Stability-Circles-1" href="#Stability-Circles-1">Stability Circles</a></h3><p>To observe the behavior of potentially unstable devices, we can plot the region that would push the device into oscillation. The circle that bounds these impedances are <em>Stability Circles</em>.</p><p>To plot these stability circles we can start with a network at one frequency:</p><pre><code class="language-julia">LNA = DataNetwork(2,50,[800e6],[[∠(0.65,-95) ∠(0.035,40); ∠(5,115) ∠(0.8,-35)]])</code></pre><pre><code class="language-none">2-Port Network
 Z0 = 50
 Frequency = 800.0 MHz to 800.0 MHz
 Points = 1
</code></pre><p>Now we can plot the the source and load stability circles on a smith chart.</p><pre><code class="language-julia">sc = SmithChart()
plotSStabCircle!(sc,LNA,800e6,label=&quot;Source Stability&quot;)
plotLStabCircle!(sc,LNA,800e6,label=&quot;Load Stability&quot;)</code></pre><pre><code class="language-none">SmithChart(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(), false), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;is smithchart cs&quot;=&gt;nothing,&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((-1.97691, 1.52699), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97675, 1.50887), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97628, 1.49076), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97549, 1.47266), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97438, 1.45458), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97296, 1.43652), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97122, 1.41848), nothing, nothing, nothing, nothing), Coordinate{2}((-1.96917, 1.40048), nothing, nothing, nothing, nothing), Coordinate{2}((-1.96681, 1.38252), nothing, nothing, nothing, nothing), Coordinate{2}((-1.96413, 1.3646), nothing, nothing, nothing, nothing)  …  Coordinate{2}((-1.96413, 1.68938), nothing, nothing, nothing, nothing), Coordinate{2}((-1.96681, 1.67146), nothing, nothing, nothing, nothing), Coordinate{2}((-1.96917, 1.6535), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97122, 1.6355), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97296, 1.61747), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97438, 1.5994), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97549, 1.58132), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97628, 1.56322), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97675, 1.54511), nothing, nothing, nothing, nothing), Coordinate{2}((-1.97691, 1.52699), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;Source Stability&quot;, false), Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;is smithchart cs&quot;=&gt;nothing,&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((0.42619, 0.963226), nothing, nothing, nothing, nothing), Coordinate{2}((0.426259, 0.955315), nothing, nothing, nothing, nothing), Coordinate{2}((0.426466, 0.947407), nothing, nothing, nothing, nothing), Coordinate{2}((0.426811, 0.939503), nothing, nothing, nothing, nothing), Coordinate{2}((0.427294, 0.931607), nothing, nothing, nothing, nothing), Coordinate{2}((0.427915, 0.923721), nothing, nothing, nothing, nothing), Coordinate{2}((0.428673, 0.915846), nothing, nothing, nothing, nothing), Coordinate{2}((0.429569, 0.907986), nothing, nothing, nothing, nothing), Coordinate{2}((0.430601, 0.900142), nothing, nothing, nothing, nothing), Coordinate{2}((0.431771, 0.892318), nothing, nothing, nothing, nothing)  …  Coordinate{2}((0.431771, 1.03413), nothing, nothing, nothing, nothing), Coordinate{2}((0.430601, 1.02631), nothing, nothing, nothing, nothing), Coordinate{2}((0.429569, 1.01847), nothing, nothing, nothing, nothing), Coordinate{2}((0.428673, 1.01061), nothing, nothing, nothing, nothing), Coordinate{2}((0.427915, 1.00273), nothing, nothing, nothing, nothing), Coordinate{2}((0.427294, 0.994845), nothing, nothing, nothing, nothing), Coordinate{2}((0.426811, 0.986948), nothing, nothing, nothing, nothing), Coordinate{2}((0.426466, 0.979045), nothing, nothing, nothing, nothing), Coordinate{2}((0.426259, 0.971137), nothing, nothing, nothing, nothing), Coordinate{2}((0.42619, 0.963226), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;Load Stability&quot;, false)])</code></pre><h2><a class="nav-anchor" id="VSWR-Circles-1" href="#VSWR-Circles-1">VSWR Circles</a></h2><p>Some times it is helpful to draw VSWR circles to know the bandwidth of a network. This is done with</p><div></div><pre><code class="language-julia"># 10 dB RL == 1.92 VSWR
circleStyle = @pgf {&quot;thick&quot;, color = &quot;black&quot;}
bpf = readTouchstone(&quot;BPF.s2p&quot;)
sc = plotSmithData(bpf,(1,1),label=&quot;S(1,1)&quot;)
plotVSWR!(sc,1.92,opts = circleStyle,label=&quot;VSWR = 1.92&quot;)</code></pre><pre><code class="language-none">SmithChart(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((1.62312, -24.2426), nothing, nothing, nothing, nothing), Coordinate{2}((0.379752, -12.1508), nothing, nothing, nothing, nothing), Coordinate{2}((0.164279, -8.10269), nothing, nothing, nothing, nothing), Coordinate{2}((0.0999243, -6.06586), nothing, nothing, nothing, nothing), Coordinate{2}((0.0662462, -4.83989), nothing, nothing, nothing, nothing), Coordinate{2}((0.0472681, -4.01962), nothing, nothing, nothing, nothing), Coordinate{2}((0.0382214, -3.43356), nothing, nothing, nothing, nothing), Coordinate{2}((0.0319427, -2.99161), nothing, nothing, nothing, nothing), Coordinate{2}((0.0268002, -2.64686), nothing, nothing, nothing, nothing), Coordinate{2}((0.0239717, -2.36886), nothing, nothing, nothing, nothing)  …  Coordinate{2}((0.010295, -0.196615), nothing, nothing, nothing, nothing), Coordinate{2}((0.00983655, -0.183533), nothing, nothing, nothing, nothing), Coordinate{2}((0.00969282, -0.174111), nothing, nothing, nothing, nothing), Coordinate{2}((0.00960723, -0.168016), nothing, nothing, nothing, nothing), Coordinate{2}((0.0105907, -0.160309), nothing, nothing, nothing, nothing), Coordinate{2}((0.0101931, -0.152716), nothing, nothing, nothing, nothing), Coordinate{2}((0.0101133, -0.152044), nothing, nothing, nothing, nothing), Coordinate{2}((0.0139687, -0.139172), nothing, nothing, nothing, nothing), Coordinate{2}((0.0144156, -0.124805), nothing, nothing, nothing, nothing), Coordinate{2}((0.0204513, -0.124651), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;S(1,1)&quot;, false), Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;is smithchart cs&quot;=&gt;nothing,&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(&quot;thick&quot;=&gt;nothing,&quot;color&quot;=&gt;&quot;black&quot;), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((-0.315068, 0.0), nothing, nothing, nothing, nothing), Coordinate{2}((-0.315021, -0.0054987), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314877, -0.0109957), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314637, -0.0164894), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314301, -0.0219781), nothing, nothing, nothing, nothing), Coordinate{2}((-0.31387, -0.02746), nothing, nothing, nothing, nothing), Coordinate{2}((-0.313343, -0.0329336), nothing, nothing, nothing, nothing), Coordinate{2}((-0.31272, -0.0383972), nothing, nothing, nothing, nothing), Coordinate{2}((-0.312002, -0.0438491), nothing, nothing, nothing, nothing), Coordinate{2}((-0.311189, -0.0492876), nothing, nothing, nothing, nothing)  …  Coordinate{2}((-0.311189, 0.0492876), nothing, nothing, nothing, nothing), Coordinate{2}((-0.312002, 0.0438491), nothing, nothing, nothing, nothing), Coordinate{2}((-0.31272, 0.0383972), nothing, nothing, nothing, nothing), Coordinate{2}((-0.313343, 0.0329336), nothing, nothing, nothing, nothing), Coordinate{2}((-0.31387, 0.02746), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314301, 0.0219781), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314637, 0.0164894), nothing, nothing, nothing, nothing), Coordinate{2}((-0.314877, 0.0109957), nothing, nothing, nothing, nothing), Coordinate{2}((-0.315021, 0.0054987), nothing, nothing, nothing, nothing), Coordinate{2}((-0.315068, 0.0), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;VSWR = 1.92&quot;, false)])</code></pre><h2><a class="nav-anchor" id="Gain-Equations-1" href="#Gain-Equations-1">Gain Equations</a></h2><p>These functions provide calculations to asses the gain performance of active microwave circuits</p><h3><a class="nav-anchor" id="Maximum-Unilateral-Gain-1" href="#Maximum-Unilateral-Gain-1">Maximum Unilateral Gain</a></h3><p>Making the unilateral assumption, S12 = 0, we can calculate MUG as</p><div>\[MUG = \frac{ |S_{21}|^2 }{ (1 - |S_{11}|^2)(1 - |S_{22}|^2) }\]</div><pre><code class="language-julia">jfet = readTouchstone(&quot;CE3520K3.s2p&quot;)
plotRectangular(jfet,testMUG,dB,label=&quot;MUG&quot;)</code></pre><pre><code class="language-none">Axis(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(&quot;xlabel&quot;=&gt;&quot;Frequency (GHz)&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((2.0, 30.5273), nothing, nothing, nothing, nothing), Coordinate{2}((2.1, 29.8528), nothing, nothing, nothing, nothing), Coordinate{2}((2.2, 29.3653), nothing, nothing, nothing, nothing), Coordinate{2}((2.3, 29.0017), nothing, nothing, nothing, nothing), Coordinate{2}((2.4, 28.5237), nothing, nothing, nothing, nothing), Coordinate{2}((2.5, 28.0827), nothing, nothing, nothing, nothing), Coordinate{2}((2.6, 27.699), nothing, nothing, nothing, nothing), Coordinate{2}((2.7, 27.2919), nothing, nothing, nothing, nothing), Coordinate{2}((2.8, 26.8928), nothing, nothing, nothing, nothing), Coordinate{2}((2.9, 26.5214), nothing, nothing, nothing, nothing)  …  Coordinate{2}((25.1, 16.5323), nothing, nothing, nothing, nothing), Coordinate{2}((25.2, 16.5458), nothing, nothing, nothing, nothing), Coordinate{2}((25.3, 16.5604), nothing, nothing, nothing, nothing), Coordinate{2}((25.4, 16.5768), nothing, nothing, nothing, nothing), Coordinate{2}((25.5, 16.5818), nothing, nothing, nothing, nothing), Coordinate{2}((25.6, 16.5837), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 16.5911), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 16.5757), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 16.5696), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 16.5483), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;MUG&quot;, false)])</code></pre><h3><a class="nav-anchor" id="Maximum-Stable-Gain-1" href="#Maximum-Stable-Gain-1">Maximum Stable Gain</a></h3><p>The maximum gain out of a potentially unstable device</p><div>\[MSG = \frac{ |S_{21}| }{ |S_{12}| }\]</div><pre><code class="language-julia">jfet = readTouchstone(&quot;CE3520K3.s2p&quot;)
plotRectangular(jfet,testMSG,dB,label=&quot;MSG&quot;)</code></pre><pre><code class="language-none">Axis(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(&quot;xlabel&quot;=&gt;&quot;Frequency (GHz)&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((2.0, 23.7802), nothing, nothing, nothing, nothing), Coordinate{2}((2.1, 23.6085), nothing, nothing, nothing, nothing), Coordinate{2}((2.2, 23.3912), nothing, nothing, nothing, nothing), Coordinate{2}((2.3, 23.1999), nothing, nothing, nothing, nothing), Coordinate{2}((2.4, 23.0007), nothing, nothing, nothing, nothing), Coordinate{2}((2.5, 22.8275), nothing, nothing, nothing, nothing), Coordinate{2}((2.6, 22.6549), nothing, nothing, nothing, nothing), Coordinate{2}((2.7, 22.5158), nothing, nothing, nothing, nothing), Coordinate{2}((2.8, 22.3475), nothing, nothing, nothing, nothing), Coordinate{2}((2.9, 22.2079), nothing, nothing, nothing, nothing)  …  Coordinate{2}((25.1, 19.6204), nothing, nothing, nothing, nothing), Coordinate{2}((25.2, 19.7437), nothing, nothing, nothing, nothing), Coordinate{2}((25.3, 19.8819), nothing, nothing, nothing, nothing), Coordinate{2}((25.4, 20.0223), nothing, nothing, nothing, nothing), Coordinate{2}((25.5, 20.1693), nothing, nothing, nothing, nothing), Coordinate{2}((25.6, 20.316), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 20.5045), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 20.6433), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 20.758), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 20.9259), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;MSG&quot;, false)])</code></pre><h3><a class="nav-anchor" id="Maximum-Available-Gain-1" href="#Maximum-Available-Gain-1">Maximum Available Gain</a></h3><p>Otherwise known as GMAX, MAG is the maximum gain from a stable network. This formula comes from <a href="https://www.microwaves101.com/encyclopedias/stability-factor">Microwaves 101</a> - a modification from the textbook equation such that MAG behaves well for high K devices.</p><div>\[MAG = \frac{ |S_{21}| }{ |S_{12}| } * \frac{1}{K+\sqrt{K^2-1}}\]</div><pre><code class="language-julia">jfet = readTouchstone(&quot;CE3520K3.s2p&quot;)
plotRectangular(jfet,testMAG,dB,label=&quot;MAG&quot;)</code></pre><pre><code class="language-none">Axis(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(&quot;xlabel&quot;=&gt;&quot;Frequency (GHz)&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing  …  nothing, nothing, nothing, nothing, nothing, Coordinate{2}((25.6, 19.3496), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 18.9032), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 18.63), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 18.4727), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 18.2511), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;MAG&quot;, false)])</code></pre><p>This makes sense as looking at the K plot from before, the device is only unconditionally stable around 14 GHz and above 25 GHz.</p><p>Just to compare this to the S21 parameter:</p><pre><code class="language-julia">ax = plotRectangular(jfet,testMAG,dB,label=&quot;MAG&quot;)
plotRectangular!(ax,jfet,(2,1),label=&quot;S(2,1)&quot;)</code></pre><pre><code class="language-none">Axis(PGFPlotsX.Options(OrderedCollections.OrderedDict{Any,Any}(&quot;xlabel&quot;=&gt;&quot;Frequency (GHz)&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Any[Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing, nothing  …  nothing, nothing, nothing, nothing, nothing, Coordinate{2}((25.6, 19.3496), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 18.9032), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 18.63), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 18.4727), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 18.2511), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;MAG&quot;, false), Plot(false, true, Options(OrderedCollections.OrderedDict{Any,Any}(&quot;mark&quot;=&gt;&quot;none&quot;,Options(OrderedCollections.OrderedDict{Any,Any}(), true)=&gt;nothing), true), Coordinates{2}(Union{Nothing, Coordinate{2}}[Coordinate{2}((2.0, 14.7608), nothing, nothing, nothing, nothing), Coordinate{2}((2.1, 14.7388), nothing, nothing, nothing, nothing), Coordinate{2}((2.2, 14.7314), nothing, nothing, nothing, nothing), Coordinate{2}((2.3, 14.7123), nothing, nothing, nothing, nothing), Coordinate{2}((2.4, 14.6965), nothing, nothing, nothing, nothing), Coordinate{2}((2.5, 14.6773), nothing, nothing, nothing, nothing), Coordinate{2}((2.6, 14.662), nothing, nothing, nothing, nothing), Coordinate{2}((2.7, 14.6468), nothing, nothing, nothing, nothing), Coordinate{2}((2.8, 14.6251), nothing, nothing, nothing, nothing), Coordinate{2}((2.9, 14.6078), nothing, nothing, nothing, nothing)  …  Coordinate{2}((25.1, 13.8357), nothing, nothing, nothing, nothing), Coordinate{2}((25.2, 13.8422), nothing, nothing, nothing, nothing), Coordinate{2}((25.3, 13.8432), nothing, nothing, nothing, nothing), Coordinate{2}((25.4, 13.8462), nothing, nothing, nothing, nothing), Coordinate{2}((25.5, 13.8452), nothing, nothing, nothing, nothing), Coordinate{2}((25.6, 13.8404), nothing, nothing, nothing, nothing), Coordinate{2}((25.7, 13.8336), nothing, nothing, nothing, nothing), Coordinate{2}((25.8, 13.8195), nothing, nothing, nothing, nothing), Coordinate{2}((25.9, 13.8086), nothing, nothing, nothing, nothing), Coordinate{2}((26.0, 13.7875), nothing, nothing, nothing, nothing)]), Any[]), LegendEntry(Options(OrderedCollections.OrderedDict{Any,Any}(), false), &quot;S(2,1)&quot;, false)])</code></pre><h2><a class="nav-anchor" id="Transmission-Line-Calculations-1" href="#Transmission-Line-Calculations-1">Transmission Line Calculations</a></h2><p>Marconi provides some basic calculations for transmission lines:</p><div></div><pre><code class="language-julia"># Input impedance of lossless t-line terminated in Zr
Θ = 35
Zr = 100+im*50
Zin = inputZ(Zr,Θ)</code></pre><pre><code class="language-none">72.66031465868264 - 55.85271589192081im</code></pre><p>And to show the behavior we expect from a λ/4 line:</p><pre><code class="language-julia">Θ = 89.99
Zr = 1e99+0im
Zin = inputZ(Zr,Θ)</code></pre><pre><code class="language-none">2.500000076154357e-96 - 0.008726646348585729im</code></pre><footer><hr/><a class="previous" href="../../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../FileIO/"><span class="direction">Next</span><span class="title">File IO</span></a></footer></article></body></html>
